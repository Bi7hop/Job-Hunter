<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Job Search Dashboard</h1>
    <p>Track and analyze job postings across multiple platforms</p>
  </div>

  <div class="search-section">
    <div class="search-row">
      <div class="search-field">
        <mat-form-field appearance="outline">
          <mat-label>Job Title / Keywords</mat-label>
          <input matInput [(ngModel)]="searchQuery" placeholder="e.g. Frontend Developer, Python">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </div>
      
      <div class="search-field">
        <mat-form-field appearance="outline">
          <mat-label>Location</mat-label>
          <input matInput [(ngModel)]="selectedLocation" placeholder="City, Country or Remote">
        </mat-form-field>
      </div>
      
      <div class="search-field">
        <mat-form-field appearance="outline">
          <mat-label>Radius (km)</mat-label>
          <input matInput type="number" [(ngModel)]="locationRadius" min="5" max="200" placeholder="Radius in km">
        </mat-form-field>
      </div>
      
      <div class="search-field">
        <mat-form-field appearance="outline">
          <mat-label>Job Types</mat-label>
          <mat-select [(value)]="selectedJobType">
            <mat-option *ngFor="let type of jobTypes" [value]="type">{{ type }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      
      <div class="search-actions">
        <button mat-raised-button color="primary" (click)="searchJobs()">
          Search Jobs
        </button>
        <button mat-button color="accent" (click)="triggerScrape()">
          <mat-icon>refresh</mat-icon> Refresh Data
        </button>
      </div>
    </div>
  </div>

  <div class="stats-section">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Total Jobs Found</span>
        </div>
        <div class="stat-value">{{ totalJobs || 0 }}</div>
        <div class="stat-trend positive">
          <mat-icon class="trend-icon">trending_up</mat-icon>
          +12%
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-label">New Today</span>
        </div>
        <div class="stat-value">{{ newToday || 0 }}</div>
        <div class="stat-trend positive">
          <mat-icon class="trend-icon">trending_up</mat-icon>
          +8%
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Job Age Filter</span>
        </div>
        <div class="filter-value">
          <mat-form-field appearance="outline" class="compact-form-field">
            <mat-label>Max Job Age</mat-label>
            <mat-select [(value)]="maxJobAgeDays" (selectionChange)="onMaxAgeChange($event)">
              <mat-option [value]="1">1 days</mat-option>
              <mat-option [value]="3">3 days</mat-option>
              <mat-option [value]="7">7 days</mat-option>
              <mat-option [value]="14">14 days</mat-option>
              <mat-option [value]="30">30 days</mat-option>
              <mat-option [value]="0">No limit</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-header">
          <span class="stat-label">Tracked Sites</span>
        </div>
        <div class="stat-value">2</div>
        <div class="stat-status" [ngClass]="{'active': isLoading}">
          {{ isLoading ? 'Refreshing...' : 'Active' }}
        </div>
      </div>
    </div>
  </div>

  <div class="jobs-section">
    <h2 class="section-title">Latest Job Listings</h2>
    
    <div *ngIf="isLoading" class="loading-indicator">
      <mat-spinner diameter="40"></mat-spinner>
      <span>Loading jobs...</span>
    </div>
    
    <div *ngIf="!isLoading && recentJobs.length === 0" class="no-jobs-found">
      <mat-icon>search</mat-icon>
      <p>No jobs found. Try broadening your search or scrape for new jobs.</p>
      <button mat-raised-button color="primary" (click)="triggerScrape()">
        Scrape for Jobs
      </button>
    </div>
    
    <div class="job-cards" *ngIf="!isLoading && recentJobs.length > 0">
      <div class="job-card" *ngFor="let job of recentJobs">
        <div class="job-card-left">
          <div class="company-initial" [style.background-color]="job.initialColor">
            {{ job.company.charAt(0) }}
          </div>
        </div>
        
        <div class="job-card-middle">
          <h3 class="job-title">{{ job.title }}</h3>
          <div class="job-company">{{ job.company }} Â· {{ job.location }}</div>
          
          <div class="job-tags">
            <span class="job-tag" *ngFor="let tag of job.tags">{{ tag }}</span>
          </div>
        </div>
        
        <div class="job-card-right">
          <div class="job-meta">
            <div class="job-posted">Posted {{ job.postedTime }}</div>
            <div class="job-source">via {{ job.source }}</div>
          </div>
          
          <a [href]="job.url" target="_blank" class="view-job-button">View Job</a>
        </div>
      </div>
    </div>
  </div>
</div>